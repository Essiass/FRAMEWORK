/**
 * jQuery xcolor
 * Copyright (c) 2010, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * Date: 06/21/2010
 *
 * @author Robert Eisele
 * @version 1.2
 *
 * @see http://www.xarg.org/project/jquery-color-plugin-xcolor/
 **/
 
(function(n){function h(a){function d(c,f){var g;if(undefined===f){c=parseInt(c,10);g=f=255}else{if(1===f){if(undefined===c)return 1;f=100;g=1}else g=f;c=parseFloat(c)}if(isNaN(c)||c<=0)return 0;if(f<c)return g;if(c<=1)return g===1?c:c*g|0;return c*g/f}function b(c,f,g){function k(i,j,l){l<0&&l++;l>1&&l--;if(6*l<1)return i+(j-i)*6*l;if(2*l<1)return j;if(3*l<2)return i+(j-i)*(4-6*l);return i}c=d(c,360)/360;f=d(f,1);g=d(g,1);if(0===f){g=m(g*255);return[g,g,g]}f=g<0.5?g*(1+f):g+f-g*f;g=g+g-f;return[m(255* k(g,f,c+1/3)),m(255*k(g,f,c)),m(255*k(g,f,c-1/3))]}function e(c,f,g){c=d(c,360)/60;f=d(f,1);g=d(g,1);var k=c|0,i=c-k;k&1||(i=1-i);c=m(255*g*(1-f));f=m(255*g*(1-f*i));g=m(255*g);switch(k){case 6:case 0:return[g,f,c];case 1:return[f,g,c];case 2:return[c,g,f];case 3:return[c,f,g];case 4:return[f,c,g];case 5:return[g,c,f]}}this.setColor=function(c){this.success=true;if(typeof c==="number"){this.a=(c>>24&255)/255;this.r=c>>16&255;this.g=c>>8&255;this.b=c&255}else{for(;typeof c==="object";){if(0 in c&& 1 in c&&2 in c){this.a=d(c[3],1);this.r=d(c[0]);this.g=d(c[1]);this.b=d(c[2]);return}else if("r"in c&&"g"in c&&"b"in c){this.a=d(c.a,1);this.r=d(c.r);this.g=d(c.g);this.b=d(c.b);return}else if("h"in c&&"s"in c){var f;if("l"in c)f=b(c.h,c.s,c.l);else if("v"in c)f=e(c.h,c.s,c.v);else if("b"in c)f=e(c.h,c.s,c.b);else break;this.a=d(c.a,1);this.r=f[0];this.g=f[1];this.b=f[2];return}break}if(typeof c!=="string")this.success=false;else{c=c.toLowerCase().replace(/[^a-z0-9,.()#%]/g,"");if(c in q){c=q[c]; this.a=!(c>>24&255)|0;this.r=c>>16&255;this.g=c>>8&255;this.b=c&255}else if(f=/^([1-9]\d*)$/.exec(c)){c=parseInt(f[1],10);this.a=(c>>24&255||255)/255;this.r=c>>16&255;this.g=c>>8&255;this.b=c&255}else if(f=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/.exec(c)){this.a=1;this.r=parseInt(f[1],16);this.g=parseInt(f[2],16);this.b=parseInt(f[3],16)}else if(f=/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/.exec(c)){this.a=1;this.r=parseInt(f[1]+f[1],16);this.g=parseInt(f[2]+f[2],16);this.b=parseInt(f[3]+f[3],16)}else if(f= /^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(c)){this.a=d(f[5],1);this.r=d(f[1]);this.g=d(f[2]);this.b=d(f[3])}else if(f=/^rgba?\(([0-9.]+\%),([0-9.]+\%),([0-9.]+\%)(,([0-9.]+)\%?)?\)$/.exec(c)){this.a=d(f[5],1);this.r=m(d(f[1],100)*2.55);this.g=m(d(f[2],100)*2.55);this.b=m(d(f[3],100)*2.55)}else if(f=/^hs([bvl])a?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(c)){c=(f[1]==="l"?b:e)(parseInt(f[2],10),parseInt(f[3],10),parseInt(f[4],10));this.a=d(f[6],1);this.r=c[0];this.g=c[1]; this.b=c[2]}else if(f=/^(\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?$/.exec(c)){this.a=d(f[5],1);this.r=d(f[1]);this.g=d(f[2]);this.b=d(f[3])}else this.success=false}}};this.getColor=function(c){if(undefined!==c)switch(c.toLowerCase()){case "rgb":return this.getRGB();case "hsv":case "hsb":return this.getHSV();case "hsl":return this.getHSL();case "int":return this.getInt();case "array":return this.getArray();case "fraction":return this.getFraction();case "css":case "style":return this.getCSS();case "name":return this.getName()}return this.getHex()}; this.getRGB=function(){if(this.success)return{r:this.r,g:this.g,b:this.b,a:this.a};return null};this.getCSS=function(){if(this.success){if(this.a==1)return"rgb("+this.r+", "+this.g+", "+this.b+")";return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}return null};this.getArray=function(){if(this.success)return[this.r,this.g,this.b,this.a*100|0];return null};this.getName=function(){if(this.success){var c=null,f,g=q,k=this.getHSL(),i;for(i in g){var j=(new h(g[i])).getHSL();j=t(0.5*(k.h-j.h)* (k.h-j.h)+0.5*(k.s-j.s)*(k.s-j.s)+(k.l-j.l)*(k.l-j.l));if(null===c||j<c){c=j;f=i}}return f}return null};this.getFraction=function(){if(this.success)return{r:this.r/255,g:this.g/255,b:this.b/255,a:this.a};return null};this.getHSL=function(){if(this.success){var c=this.r/255,f=this.g/255,g=this.b/255,k=r(c,f,g),i=s(c,f,g),j=i-k,l,o=(i+k)/2;if(0==j)k=l=0;else{k=o<0.5?j/(i+k):j/(2-(i+k));if(i==c)l=(f-g)/j;else if(i==f)l=2+(g-c)/j;else if(i==g)l=4+(c-f)/j;if(l<0)l+=6}return{h:m(l*60),s:m(k*100),l:m(o* 100),a:this.a}}return null};this.getHSV=function(){if(this.success){var c=this.r/255,f=this.g/255,g=this.b/255,k=r(c,f,g),i=s(c,f,g),j=i-k,l;if(0==j)k=l=0;else{k=j/i;j*=6;var o=0.5+(i-c)/j,u=0.5+(i-f)/j;j=0.5+(i-g)/j;if(c==i)l=j-u;else if(f==i)l=1/3+o-j;else if(g==i)l=2/3+u-o;l<0&&l++;l>1&&l--}return{h:m(l*360),s:m(k*100),v:m(i*100),a:this.a}}return null};this.getHex=function(){if(this.success){var c=this.r>>4,f=this.g>>4,g=this.b>>4,k=this.r&15,i=this.g&15,j=this.b&15;if(0===(c^k|f^i|g^j))return"#"+ "0123456789abcdef".charAt(c)+"0123456789abcdef".charAt(f)+"0123456789abcdef".charAt(g);return"#"+"0123456789abcdef".charAt(c)+"0123456789abcdef".charAt(k)+"0123456789abcdef".charAt(f)+"0123456789abcdef".charAt(i)+"0123456789abcdef".charAt(g)+"0123456789abcdef".charAt(j)}return null};this.getInt=function(c){if(this.success){if(undefined!==c)return(this.a*100|0)<<24^this.r<<16^this.g<<8^this.b;return(this.r<<16^this.g<<8^this.b)&16777215}return null};this.toString=function(){return this.getHex()};this.setColor(a)} function v(a,d){var b="";if(n.support.opacity){do{b=n.curCSS(a,d);if(""!==b||n.nodeName(a,"body"))break}while(a=a.parentNode);if(""===b)b="transparent"}else{do{b=n.curCSS(a,d);if(""!==b&&"transparent"!==b&&"rgba(0, 0, 0, 0)"!==b||n.nodeName(a,"body"))break}while(a=a.parentNode);if(""===b)b="backgroundColor"===d?"white":"black"}return new h(b)}var q={transparent:16777216,aliceblue:15792383},m=Math.round,t=Math.sqrt,r=Math.min, s=Math.max,p=Math.random;n.each(["color","backgroundColor","borderColor","borderTopColor","borderBottomColor","borderLeftColor","borderRightColor","outlineColor"],function(a,d){n.fx.step[d]=function(b){if(b.xinit===undefined){if(typeof b.end==="string"&&-1!==b.end.indexOf(";")){var e,c=b.end.split(";");if(c.length>2){for(e in c)c[e]=-1===c[e].indexOf("native")?new h(c[e]):v(b.elem,d);b.start=null;b.end=c}else{b.start=new h(c[0]);b.end=new h(c[1])}}else{b.start=v(b.elem,d);b.end=new h(b.end)}b.xinit= 1}e=b.start;c=b.end;var f=b.pos;if(null===e){var g=f*(c.length-1);f=f<1?g|0:c.length-2;e=c[f];c=c[f+1];f=g-f}b.elem.style[d]=n.support.opacity?"rgba("+(e.r+(c.r-e.r)*f|0)+","+(e.g+(c.g-e.g)*f|0)+","+(e.b+(c.b-e.b)*f|0)+","+(e.a+(c.a-e.a)*f)+")":"rgb("+(e.r+(c.r-e.r)*f|0)+","+(e.g+(c.g-e.g)*f|0)+","+(e.b+(c.b-e.b)*f|0)+")"}});n.xcolor=new function(){this.test=function(a){a=new h(a);if(a.success)return a;return null};this.red=function(a){a=new h(a);if(a.success){a.g=255;a.b=255;return a}return null}; this.blue=function(a){a=new h(a);if(a.success){a.r=255;a.g=255;return a}return null};this.green=function(a){a=new h(a);if(a.success){a.r=255;a.b=255;return a}return null};this.random=function(){return new h([255*p()|0,255*p()|0,255*p()|0])};this.complementary=function(a){a=new h(a);if(a.success){a.r^=255;a.g^=255;a.b^=255;return a}return null};this.opacity=function(a,d,b){a=new h(a);d=new h(d);if(a.success&d.success){if(b>1)b/=100;b=s(b-1+d.a,0);a.r=m((d.r-a.r)*b+a.r);a.g=m((d.g-a.g)*b+a.g);a.b=m((d.b- a.b)*b+a.b);return a}return null};this.greyfilter=function(a,d){var b,e=new h(a);if(e.success){switch(d){case 1:b=0.35+13*(e.r+e.g+e.b)/60;break;case 2:b=(13*(e.r+e.g+e.b)+5355)/60;break;default:b=e.r*0.3+e.g*0.59+e.b*0.11}e.r=e.g=e.b=r(b|0,255);return e}return null};this.webround=function(a){a=new h(a);if(a.success){if((a.r+=51-a.r%51)>255)a.r=255;if((a.g+=51-a.g%51)>255)a.g=255;if((a.b+=51-a.b%51)>255)a.b=255;return a}return null};this.distance=function(a,d){var b=new h(a),e=new h(d);if(b.success& e.success)return t(3*(e.r-b.r)*(e.r-b.r)+4*(e.g-b.g)*(e.g-b.g)+2*(e.b-b.b)*(e.b-b.b));return null};this.readable=function(a,d){var b=new h(d),e=new h(a);if(b.success&e.success)return(e.r-b.r)*(e.r-b.r)+(e.g-b.g)*(e.g-b.g)+(e.b-b.b)*(e.b-b.b)>10404;return null};this.combine=function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){b.r^=e.r;b.g^=e.g;b.b^=e.b;return b}return null};this.breed=function(a,d){var b=new h(a),e=new h(d),c=0;if(b.success&e.success){for(var f=0;f<6;f++)if(p()<0.5)c|=15<< (f<<2);b.r=b.r&c>>16&255|e.r&(c>>16&255^255);b.g=b.g&c>>8&255|e.g&(c>>8&255^255);b.b=b.b&c>>0&255|e.b&(c>>0&255^255);return b}return null};this.additive=function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){if((b.r+=e.r)>255)b.r=255;if((b.g+=e.g)>255)b.g=255;if((b.b+=e.b)>255)b.b=255;return b}return null};this.subtractive=function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){if((b.r+=e.r-255)<0)b.r=0;if((b.g+=e.g-255)<0)b.g=0;if((b.b+=e.b-255)<0)b.b=0;return b}return null};this.subtract= function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){if((b.r-=e.r)<0)b.r=0;if((b.g-=e.g)<0)b.g=0;if((b.b-=e.b)<0)b.b=0;return b}return null};this.multiply=function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){b.r=b.r/255*e.r|0;b.g=b.g/255*e.g|0;b.b=b.b/255*e.b|0;return b}return null};this.average=function(a,d){var b=new h(a),e=new h(d);if(b.success&e.success){b.r=b.r+e.r>>1;b.g=b.g+e.g>>1;b.b=b.b+e.b>>1;return b}return null};this.triad=function(a){a=new h(a);if(a.success)return[a, new h([a.b,a.r,a.g]),new h([a.g,a.b,a.r])];return null};this.tetrad=function(a){a=new h(a);if(a.success)return[a,new h([a.b,a.r,a.b]),new h([a.b,a.g,a.r]),new h([a.r,a.b,a.r])];return null};this.gradientlevel=function(a,d,b,e){if(b>e)return null;a=new h(a);d=new h(d);if(a.success&d.success){a.r=a.r+(d.r-a.r)/e*b|0;a.g=a.g+(d.g-a.g)/e*b|0;a.b=a.b+(d.b-a.b)/e*b|0;return a}return null};this.gradientarray=function(a,d,b){if(d>b)return null;var e=d*(a.length-1)/b|0;d=(d-b*e/(a.length-1))/b;b=new h(a[e]); e=new h(a[e+1]);if(b.success&e.success){b.r=b.r+a.length*(e.r-b.r)*d|0;b.g=b.g+a.length*(e.g-b.g)*d|0;b.b=b.b+a.length*(e.b-b.b)*d|0;return b}return null};this.nearestname=function(a){a=new h(a);if(a.success)return a.getName();return null};this.darken=function(a,d,b){if(d===undefined)d=1;else if(d<0)return this.lighten(a,-d,b);if(b===undefined)b=32;a=new h(a);if(a.success){if((a.r-=b*d)<0)a.r=0;if((a.g-=b*d)<0)a.g=0;if((a.b-=b*d)<0)a.b=0;return a}return null};this.lighten=function(a,d,b){if(d===undefined)d= 1;else if(d<0)return this.darken(a,-d,b);if(b===undefined)b=32;a=new h(a);if(a.success){if((a.r+=b*d)>255)a.r=255;if((a.g+=b*d)>255)a.g=255;if((a.b+=b*d)>255)a.b=255;return a}return null};this.analogous=function(a,d,b){if(d===undefined)d=8;if(b===undefined)b=30;var e=new h(a);if(e.success){a=e.getHSV();b=360/b;e=[e];for(a.h=(a.h-(b*d>>1)+720)%360;--d;){a.h+=b;a.h%=360;e.push(new h(a))}return e}return null};this.splitcomplement=function(a){var d=new h(a);if(d.success){a=d.getHSV();d=[d];a.h+=72;a.h%= 360;d.push(new h(a));a.h+=144;a.h%=360;d.push(new h(a));return d}return null};this.monochromatic=function(a,d){if(d===undefined)d=6;var b=new h(a);if(b.success){var e=b.getHSV();for(b=[b];--d;){e.v+=20;e.v%=100;b.push(new h(e))}return b}return null}};n.fn.isReadable=function(){var a=this[0],d="",b="";do{if(""===d&&("transparent"===(d=n.curCSS(a,"color"))||"rgba(0, 0, 0, 0)"===d))d="";if(""===b&&("transparent"===(b=n.curCSS(a,"backgroundColor"))||"rgba(0, 0, 0, 0)"===b))b="";if(""!==d&&""!==b||n.nodeName(a, "body"))break}while(a=a.parentNode);if(""===d)d="black";if(""===b)b="white";return n.xcolor.readable(b,d)}})(jQuery);